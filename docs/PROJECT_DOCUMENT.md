# 📋 SUNA - PROJECT DOCUMENTATION
*Generated by BMad Master - Complete Project Analysis & Architecture Guide*

---

## 📊 PROJECT OVERVIEW

### 🎯 Mission Statement
**Suna** (formerly Epsilon) is a comprehensive open-source AI agent platform that empowers organizations to build, deploy, and manage sophisticated autonomous AI agents. The platform features **ChainLens** as its flagship generalist AI worker, demonstrating advanced capabilities in research, automation, and analysis with integrated crypto market intelligence.

### 🏢 Project Identity
- **Project Name**: Suna (Advanced AI Agent Platform)
- **Core Product**: ChainLens - Flagship AI Worker
- **License**: Apache-2.0
- **Version**: 1.0 (Backend), Multi-component versioning
- **Repository**: https://github.com/epsilon-ai/chainlens
- **Website**: https://www.chainlens.net/

### 🎨 Brand & Community
- **Discord**: https://discord.gg/Py6pCBUUPw
- **Twitter**: https://x.com/epsilonai
- **Multi-language Support**: 8 languages (EN, DE, ES, FR, JA, KO, PT, RU, ZH)
- **Community-driven**: Active contribution ecosystem

---

## 🏗️ ARCHITECTURE ANALYSIS

### 🔧 System Architecture
```
┌─────────────────────────────────────────────────────────┐
│                 Frontend (Next.js 15)                  │
│         React 18 + TypeScript + Tailwind CSS          │
└─────────────────────┬───────────────────────────────────┘
                     │ API Communication
┌─────────────────────▼───────────────────────────────────┐
│               Backend (Python FastAPI)                 │
│    LiteLLM + Supabase + Redis + Dramatiq Workers      │
│    Service Integration via Direct HTTP Calls          │
└─────┬──────────────────────────────────┬───────────────┘
       │                                   │
       │     Direct HTTP Connections      │
       │                                   │
┌──────▼────────────────────────▼─────────┐    ┌────────────┐
│          Microservices (NestJS)                │    │ ChainLens   │
│  • OnChain Service (Port 3001)         │    │ Core        │
│  • Sentiment Service (Port 3002)       │    │ Orchestrator│
│  • Tokenomics Service (Port 3003)      │    │ (Port 3006) │
│  • Team Analysis Service (Port 3004)   │    │ Standalone  │
└─────────────────┬───────────────────────┘    └────────────┘
                 │
┌─────────────────▼───────────────────────────────────────┐
│                Agent Runtime Engine                     │
│    Browser Automation + Code Interpreter + Tools      │
└─────────────────────────────────────────────────────────┘
```

### 🧩 Component Breakdown

#### 1️⃣ Frontend Layer (Port 3000)
- **Framework**: Next.js 15 với App Router
- **Language**: TypeScript
- **Styling**: Tailwind CSS 4 với Tailwind Animate
- **UI Components**: Radix UI, Shadcn/ui
- **State Management**: React Query (TanStack), Zustand
- **Features**: Real-time chat, agent configuration, monitoring dashboards

#### 2️⃣ Backend API (Port 8000)
- **Framework**: FastAPI với Python 3.11+
- **Database**: Supabase PostgreSQL với Row Level Security
- **Cache/Queue**: Redis 5.2+ với Upstash
- **Background Processing**: Dramatiq 1.18+
- **LLM Integration**: LiteLLM 1.75+ (multi-provider)
- **Authentication**: Supabase Auth với JWT

#### 3️⃣ Microservices Architecture (Ports 3001-3006)
**Connected Services (3001-3004):**
- **OnChain Service**: Blockchain data analysis, Web3 integrations
- **Sentiment Service**: Social media monitoring, sentiment tracking
- **Tokenomics Service**: Financial metrics, token economics
- **Team Service**: Verification, credibility scoring

**Standalone Service (3006):**
- **ChainLens Core**: Independent orchestrator (not integrated with main backend)

#### 4️⃣ Agent Runtime
- **Containerization**: Docker-isolated environments
- **Browser Automation**: Playwright integration
- **Code Execution**: E2B Code Interpreter
- **Tool Ecosystem**: Comprehensive toolset
- **Security**: Isolated execution with secure file access

---

## 💻 TECHNOLOGY STACK

### 🖥️ Frontend Technologies
```json
{
  "framework": "Next.js 15",
  "language": "TypeScript 5+",
  "styling": "Tailwind CSS 4",
  "ui_library": ["Radix UI", "Shadcn/ui"],
  "state_management": ["React Query", "Zustand"],
  "forms": "React Hook Form + Zod",
  "editor": "TipTap",
  "testing": "Playwright + Jest"
}
```

### 🔧 Backend Technologies
```json
{
  "framework": "FastAPI 0.115+",
  "language": "Python 3.11+",
  "database": "Supabase (PostgreSQL)",
  "cache": "Redis 5.2+",
  "queue": "Dramatiq 1.18+",
  "llm": "LiteLLM 1.75+",
  "auth": "Supabase Auth",
  "monitoring": "Langfuse, Sentry",
  "deployment": "Gunicorn + Uvicorn"
}
```

### 🏢 Microservices Technologies
```json
{
  "framework": "NestJS",
  "language": "TypeScript",
  "database": "PostgreSQL per service",
  "documentation": "Swagger/OpenAPI",
  "external_apis": [
    "Moralis", "CoinGecko", 
    "Twitter API", "GitHub API"
  ],
  "messaging": "Redis"
}
```

### 🛠️ DevOps & Infrastructure
```json
{
  "containerization": "Docker + Docker Compose",
  "monitoring": ["Prometheus", "Grafana", "Langfuse", "Sentry"],
  "testing": ["Playwright", "Jest", "Pytest"],
  "code_quality": ["ESLint", "Prettier", "Ruff", "MyPy"],
  "version_control": "Git với Conventional Commits",
  "package_managers": ["pnpm", "uv"],
  "deployment": ["Kubernetes", "Helm"]
}
```

---

## 🚀 KEY FEATURES & CAPABILITIES

### 🤖 ChainLens AI Worker Capabilities
1. **🔍 Research & Analysis**
   - Multi-source web research
   - Document analysis và synthesis
   - Market research và competitive intelligence
   - Comprehensive data processing

2. **🌐 Browser Automation**
   - Complex website navigation
   - Automated data extraction
   - Form filling và submission
   - Web workflow automation

3. **📁 File & Document Management**
   - Document creation và editing (DOC, XLS, PPT)
   - File system organization
   - Format conversion
   - Report generation

4. **📊 Data Processing**
   - Dataset cleaning và transformation
   - Statistical analysis
   - Visualization creation
   - KPI monitoring

5. **⚙️ System Administration**
   - Safe command-line operations
   - System configuration management
   - DevOps workflow automation
   - Performance monitoring

### 🎯 Specialized Agent Types
- **Customer Service Agents**: Support ticket handling, user onboarding
- **Content Creation Agents**: Marketing copy, documentation, training materials
- **Sales & Marketing Agents**: Lead qualification, CRM management, campaigns
- **Research Agents**: Academic research, trend monitoring, patent analysis
- **Industry-Specific Agents**: Healthcare, Finance, Legal, Education

### 🔐 Security & Compliance Features
- **OWASP Compliance**: Security best practices implementation
- **Automated Vulnerability Scanning**: Continuous security monitoring
- **Row Level Security**: Database-level access controls
- **JWT Authentication**: Secure token-based authentication
- **Docker Isolation**: Secure execution environments

---

## 📋 DEVELOPMENT WORKFLOW

### 🏗️ Setup Process
```bash
# 1. Clone Repository
git clone https://github.com/epsilon-ai/chainlens.git
cd chainlens

# 2. Interactive Setup (14-step wizard)
python setup.py

# 3. Start Platform
python start.py
```

### 🛠️ Development Commands

#### Frontend Development
```bash
cd frontend
pnpm dev              # Development server với Turbopack
pnpm build            # Production build
pnpm test:all         # Unit + E2E tests
pnpm test:e2e:ui      # Playwright UI mode
pnpm lint && pnpm format  # Code quality
```

#### Backend Development
```bash
cd backend
uv run api.py                          # FastAPI server
uv run dramatiq run_agent_background   # Background worker
uv run pytest --cov                   # Tests với coverage
ruff check . && ruff format .         # Linting và formatting
mypy .                                 # Type checking
```

#### Microservices Development
```bash
cd microservices
./start-all-services.sh    # Start tất cả services
./health-check-all.sh      # Health check
./stop-all-services.sh     # Stop services

# Individual service development
cd [service-name]
pnpm run start:dev         # Development mode
pnpm run test:e2e          # E2E testing
```

#### Quality Assurance
```bash
# Comprehensive Testing
./run-e2e-tests.sh         # Full E2E test suite
./test-apis.sh             # API endpoint testing
./dependency-security-scan.sh  # Security scan

# Database Management
supabase start             # Local Supabase
supabase db reset          # Reset database
supabase db push           # Push migrations
```

### 📝 Code Standards
- **Formatting**: Prettier (frontend), Ruff (backend)
- **Linting**: ESLint (frontend), Ruff + MyPy (backend)
- **Type Safety**: Strict TypeScript, Python type hints
- **Commits**: Conventional Commits specification
- **Testing**: Minimum coverage requirements
- **Security**: OWASP compliance checks

---

## 🚀 DEPLOYMENT GUIDE

### 🐳 Docker Deployment
```bash
# Production Stack
docker compose -f docker-compose.yml -f docker-compose.monitoring.yml up -d

# Monitoring Stack
./setup-monitoring.sh

# Individual Services
docker compose up redis -d      # Redis only
docker compose up frontend -d   # Frontend only
```

### ☸️ Kubernetes Deployment
```bash
# Helm Deployment
helm upgrade --install suna ./helm/suna \
  --namespace suna \
  --create-namespace \
  -f values.production.yaml

# Monitoring
kubectl apply -f monitoring/
```

### 📊 Production Monitoring Stack
- **Metrics**: Prometheus + Grafana dashboards
- **Error Tracking**: Sentry integration (frontend + backend)
- **LLM Observability**: Langfuse tracking
- **Logging**: Centralized logging với Loki
- **Tracing**: Distributed tracing với Jaeger
- **Health Checks**: Automated monitoring với alerting

### ✅ Production Checklist
- [ ] SSL/TLS certificates configured
- [ ] Environment variables secured
- [ ] Database migrations applied
- [ ] Monitoring và alerting active
- [ ] Backup strategy implemented
- [ ] Security audit completed
- [ ] Performance optimization tuned
- [ ] Disaster recovery plan tested

---

## 📈 PROJECT STATUS & METRICS

### 🎯 Current Status
- **Development Stage**: Production Ready
- **Version**: v1.0 (Backend stable)
- **Architecture**: Microservices với container orchestration
- **Testing Coverage**: Comprehensive E2E + unit testing
- **Security**: OWASP compliant với automated scanning

### 📊 Technical Metrics
- **Languages**: Python (Backend), TypeScript (Frontend/Microservices)
- **Services**: 6 main services (Frontend, Backend, 4 Microservices, 1 Standalone)
- **Database**: PostgreSQL với Supabase integration
- **Scalability**: Docker + Kubernetes ready
- **Observability**: Full monitoring stack implemented

### 🌟 Innovation Highlights
- **Multi-LLM Support**: Provider-agnostic với LiteLLM
- **Agent Runtime**: Secure, isolated execution environments
- **Crypto Integration**: ChainLens specialized crypto analysis
- **Enterprise Ready**: Full production deployment stack
- **Community Driven**: Open source với active contribution

---

## 🎯 NEXT STEPS & ROADMAP

### 🔮 Immediate Priorities
1. **Performance Optimization**: Caching strategies và query optimization
2. **Enhanced Security**: Advanced threat detection
3. **Agent Marketplace**: Community-driven agent sharing
4. **Mobile Support**: Progressive Web App enhancement
5. **Integration Ecosystem**: Third-party service connectors

### 🌐 Strategic Vision
- **Multi-Agent Orchestration**: Complex workflow coordination
- **Enterprise Features**: Advanced user management, audit trails
- **AI Model Training**: Custom model fine-tuning capabilities
- **Global Scaling**: Multi-region deployment support
- **Compliance Frameworks**: Industry-specific compliance tools

---

*📝 Document generated by BMad Master | Last updated: 2025-01-09 | Version: 1.0*

*🧙 For technical support và development guidance, refer to WARP.md và contributing guidelines*
